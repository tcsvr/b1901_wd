<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
        <input type="file" style="display:none" id="upload_file" onchange="javascript:validate_img(this)">
        <img alt="暂无照片" src="${proPath }/images/${sessionScope.user.image}" onclick="show_file_window()" class="img_radius">
</body>
</html>
<script>
        //点击图片触发隐藏的图片上传框
        function show_file_window() {
                $("#upload_file").click();
            }
        //判断图片格式和大小
        function validate_img(ele) {
                // 返回 KB，保留小数点后两位
                //alert((ele.files[0].size/(1024*1024)).toFixed(2));
                var file = ele.value;
                if (!/.(gif|jpg|jpeg|png|GIF|JPG|bmp)$/.test(file)) {
                    alert("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种");
                    return false;
                } else {
                    if (((ele.files[0].size).toFixed(2)) >= (100 * 1024)) {
                        alert("请上传小于100kb的图片");
                        return false;
                    }
                }
            }
        </script>
